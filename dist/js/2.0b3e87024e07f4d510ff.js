webpackJsonp([2],{"2NXm":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"PageIndex",data:function(){return{userLogin:{},userSignup:{},opened:!1,notifyAlertType:"",notifyAlertMessage:""}},methods:{signup:function(){var t=this;this.$axios.post("/api/signup/",this.userSignup).then(function(e){t.opened=!1,t.user={},t.notifyAlertType="positive",t.notifyAlertMessage="Utilisateur enregistré !"}).catch(function(e){t.notifyAlertType="negative",t.notifyAlertMessage=e.response.data})},login:function(){var t=this;this.$axios.post("/api/login/",this.userLogin).then(function(e){var a={},s=e.data.token;a.id=e.data.userId,a.email=e.data.email,t.$q.localStorage.set("user",a),t.$q.localStorage.set("token",s),t.$store.dispatch("global/addUser",a),t.$store.dispatch("global/addToken",s),t.$store.dispatch("global/connected"),t.notifyAlertType="positive",t.notifyAlertMessage="Bienvenue "+a.email,setTimeout(function(){t.$router.push("todos")},1e3)}).catch(function(e){t.notifyAlertType="negative",t.notifyAlertMessage=e.response.data})}},watch:{notifyAlertMessage:function(){this.$q.notify({type:this.notifyAlertType,message:this.notifyAlertMessage,position:"center",timeout:1e3})}}},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-modal",{staticClass:"modal",model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"400px"},attrs:{inline:""}},[a("q-card-title",{staticClass:"text-center bg-primary text-white"},[t._v("\n        Saisir votre utilisateur\n      ")]),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-main",{staticClass:"cardMain"},[a("q-input",{attrs:{type:"email",placeholder:"E-mail"},model:{value:t.userSignup.email,callback:function(e){t.$set(t.userSignup,"email",e)},expression:"userSignup.email"}}),t._v(" "),a("q-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.userSignup.password,callback:function(e){t.$set(t.userSignup,"password",e)},expression:"userSignup.password"}})],1),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-actions",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:""},on:{click:function(e){t.opened=!1}}},[t._v("Fermer")]),t._v(" "),a("q-btn",{staticClass:"saveBtn",attrs:{flat:""},on:{click:t.signup}},[t._v("Enregistrer")])],1)],1)],1),t._v(" "),a("q-card",{staticClass:"q-ma-sm card",attrs:{inline:""}},[a("q-card-title",{staticClass:"text-center bg-primary text-white"},[t._v("\n      Enregistrement / Connexion\n    ")]),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-main",{staticClass:"cardMain"},[a("q-input",{attrs:{type:"email",placeholder:"E-mail"},model:{value:t.userLogin.email,callback:function(e){t.$set(t.userLogin,"email",e)},expression:"userLogin.email"}}),t._v(" "),a("q-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.userLogin.password,callback:function(e){t.$set(t.userLogin,"password",e)},expression:"userLogin.password"}})],1),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-actions",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:""},on:{click:function(e){t.opened=!0}}},[t._v("Créer un utilisateur")]),t._v(" "),a("q-btn",{attrs:{flat:""},on:{click:t.login}},[t._v("Se connecter")])],1)],1)],1)},n=[];i._withStripped=!0;var r=a("XyMi"),o=!1;var l=function(t){o||a("KTK0")},c=Object(r.a)(s,i,n,!1,l,"data-v-57509004",null);c.options.__file="src/pages/index.vue";e.default=c.exports},H8NG:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.card[data-v-57509004] {\n  position: absolute;\n  width: 310px;\n  left: 50vw;\n  margin-left: -160px;\n  top: 5vh;\n}\n.saveBtn[data-v-57509004] {\n  position: absolute;\n  right: 0px;\n}\n",""])},KTK0:function(t,e,a){var s=a("H8NG");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a("rjj0").default)("01c77c14",s,!1,{})}});