(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7858fa5a"],{"52db":function(e,t,a){"use strict";var s=a("f379"),i=a.n(s);i.a},9261:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-modal",{staticClass:"modal",model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("q-card",{staticStyle:{width:"400px"},attrs:{inline:""}},[a("q-card-title",{staticClass:"text-center bg-primary text-white"},[e._v("\n        Saisir votre utilisateur\n      ")]),a("q-card-separator"),a("q-card-main",{staticClass:"cardMain"},[a("q-input",{attrs:{type:"email",placeholder:"E-mail"},model:{value:e.userSignup.email,callback:function(t){e.$set(e.userSignup,"email",t)},expression:"userSignup.email"}}),a("q-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.userSignup.password,callback:function(t){e.$set(e.userSignup,"password",t)},expression:"userSignup.password"}})],1),a("q-card-separator"),a("q-card-actions",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:""},on:{click:function(t){e.opened=!1}}},[e._v("Fermer")]),a("q-btn",{staticClass:"saveBtn",attrs:{flat:""},on:{click:e.signup}},[e._v("Enregistrer")])],1)],1)],1),a("q-card",{staticClass:"q-ma-sm card",attrs:{inline:""}},[a("q-card-title",{staticClass:"text-center bg-primary text-white"},[e._v("\n      Enregistrement / Connexion\n    ")]),a("q-card-separator"),a("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("q-card-main",{staticClass:"cardMain"},[a("q-input",{attrs:{type:"email",placeholder:"E-mail"},model:{value:e.userLogin.email,callback:function(t){e.$set(e.userLogin,"email",t)},expression:"userLogin.email"}}),a("q-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.userLogin.password,callback:function(t){e.$set(e.userLogin,"password",t)},expression:"userLogin.password"}})],1),a("q-card-separator"),a("q-card-actions",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:""},on:{click:function(t){e.opened=!0}}},[e._v("Créer un utilisateur")]),a("q-btn",{attrs:{type:"submit",flat:""}},[e._v("Se connecter")])],1)],1)],1)],1)},i=[];s._withStripped=!0;var n={name:"PageIndex",data:function(){return{userLogin:{email:"",password:""},userSignup:{},opened:!1,notifyAlertType:"",notifyAlertMessage:""}},methods:{signup:function(){var e=this;this.$axios.post("/api/signup/",this.userSignup).then(function(t){e.opened=!1,e.user={},e.notifyAlertType="positive",e.notifyAlertMessage="Utilisateur enregistré !"}).catch(function(t){e.notifyAlertType="negative",e.notifyAlertMessage=t.response.data})},login:function(){var e=this;this.$axios.post("/api/login/",this.userLogin).then(function(t){var a={},s=t.data.token;a.id=t.data.userId,a.email=t.data.email,e.$q.localStorage.set("user",a),e.$q.localStorage.set("token",s),e.$store.dispatch("global/addUser",a),e.$store.dispatch("global/addToken",s),e.$store.dispatch("global/connected"),e.notifyAlertType="positive",e.notifyAlertMessage="Bienvenue ".concat(a.email),setTimeout(function(){e.$router.push("todos")},1e3)}).catch(function(t){e.notifyAlertType="negative",e.notifyAlertMessage=t.response.data})}},watch:{notifyAlertMessage:function(){this.$q.notify({type:this.notifyAlertType,message:this.notifyAlertMessage,position:"center",timeout:1e3})}}},r=n,o=(a("52db"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"0a0f0f9e",null);l.options.__file="index.vue";t["default"]=l.exports},f379:function(e,t,a){}}]);